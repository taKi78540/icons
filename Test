Parfait, j‚Äôai compris la diff√©rence Allocation vs Return üëç
En allocation, la d√©cision ‚Äúcatalogue vs non catalogue‚Äù est faite tr√®s t√¥t, d√®s qu‚Äôon a identifi√© le b√©n√©ficiaire (propri√©taire). Du coup, le back-end de fin de parcours est plus simple :
	‚Ä¢	Si le b√©n√©ficiaire est ‚ÄúCatalogue ready‚Äù (√©ligible) ‚Üí on travaille forc√©ment avec une Request existante (sinon on ne d√©livre rien). En fin de parcours, on compl√®te la Request (et on n‚Äôen cr√©e pas une nouvelle).
	‚Ä¢	Si le b√©n√©ficiaire n‚Äôest pas Catalogue ready ‚Üí on est en saisie libre ‚Üí en fin de parcours on cr√©e un Incident (et pas de Request).

Je te repropose donc le backlog back-end Allocation reconstruit avec cette logique (Jira-ready, en anglais ou fran√ßais ? je le mets en anglais comme tout √† l‚Äôheure, mais je peux te le repasser en FR si tu pr√©f√®res).

‚∏ª

üü¶ EPIC ‚Äî Hardware Allocation ¬∑ Backend Processing & Integrations

Epic goal

Finalize backend actions after a hardware allocation by either updating an existing ServiceNow Request (catalog flow) or creating a ServiceNow Incident (non-catalog flow), while generating/storing the allocation PV and notifying stakeholders.

‚∏ª

US1 ‚Äî Persist allocation eligibility result from the owner identification step

As a system
I want to persist the ‚Äúcatalog eligibility‚Äù decision made when the beneficiary is selected
So that the end-of-process backend actions can be deterministic

Description

During the owner identification step (early in the flow), the system already determines:
	‚Ä¢	whether the beneficiary is Catalog-ready (eligible)
	‚Ä¢	whether the beneficiary‚Äôs scope is aligned with Group Catalog rules

This result must be stored for the allocation transaction and reused at completion.

Acceptance Criteria

GIVEN a beneficiary is selected at the beginning of the allocation process
WHEN eligibility is evaluated
THEN the system stores the eligibility result for the current allocation transaction

AND the stored value is reused at completion to decide Request vs Incident


‚∏ª

US2 ‚Äî Enforce ‚Äúno request = no delivery‚Äù for Catalog-ready beneficiaries

As a system
I want to prevent allocation if the beneficiary is Catalog-ready but has no pending request
So that hardware is delivered only against an existing request

Acceptance Criteria

GIVEN a beneficiary is Catalog-ready
WHEN no pending request exists
THEN the allocation cannot be completed
AND no equipment delivery can be validated


‚∏ª

US3 ‚Äî Update the existing ServiceNow Request with delivery details (Catalog flow)

As a system
I want to update the selected ServiceNow Request with allocation details
So that the request becomes the traceability record of the delivery

Description

When Catalog-ready:
	‚Ä¢	A request has been selected in the UI
	‚Ä¢	At completion, update that same request with:
	‚Ä¢	delivered equipment identifiers (HAM data if available, otherwise entered identifiers)
	‚Ä¢	power supply delivered (Yes/No) where applicable
	‚Ä¢	optional ‚Äúnon-request‚Äù accessories delivered (checkbox list)
	‚Ä¢	date/time, comptoir/site, technician identity
	‚Ä¢	signature status (+ bypass reason if applicable)
	‚Ä¢	PV reference (once available)

Acceptance Criteria

GIVEN the beneficiary is Catalog-ready
AND a request was selected in the allocation UI
WHEN the allocation is completed
THEN the same ServiceNow Request is updated with delivery details

AND no new ServiceNow Request is created


‚∏ª

US4 ‚Äî Transition the request status after successful delivery (Catalog flow)

As a system
I want to update the request status after delivery
So that the request reflects it has been fulfilled

Acceptance Criteria

GIVEN a Catalog flow allocation is completed successfully
THEN the request status is updated according to the defined workflow (Fulfilled/Delivered/Closed)
OR a final fulfillment record is appended (per ServiceNow process rules)


‚∏ª

US5 ‚Äî Create a ServiceNow Incident for non-catalog allocations (free-entry flow)

As a system
I want to create a ServiceNow Incident when the beneficiary is not Catalog-ready
So that the delivery remains traceable outside Group Catalog processes

Description

When not Catalog-ready:
	‚Ä¢	the UI uses free/manual equipment entry
	‚Ä¢	at completion, create a ServiceNow Incident containing:
	‚Ä¢	beneficiary identity/context
	‚Ä¢	delivered equipment identifiers (barcode/serial/computer name/model, IMEI if applicable)
	‚Ä¢	power supply delivered (Yes/No) if relevant
	‚Ä¢	delivered accessories
	‚Ä¢	date/time, comptoir/site, technician
	‚Ä¢	signature status (+ bypass reason)
	‚Ä¢	PV link (when available)

Acceptance Criteria

GIVEN the beneficiary is not Catalog-ready
WHEN the allocation is completed
THEN a ServiceNow Incident is created
AND no ServiceNow Request is created or updated


‚∏ª

US6 ‚Äî Generate the allocation PV (PDF)

As a system
I want to generate an allocation PV as a PDF
So that there is a formal proof of delivery

Acceptance Criteria

WHEN an allocation is completed (signed or bypassed)
THEN a PV PDF is generated including:
- delivered equipment and accessories
- beneficiary identity
- technician identity
- date/time and location
- signature or bypass reason


‚∏ª

US7 ‚Äî Store the PV on SharePoint and persist the reference

As a system
I want to store the allocation PV on SharePoint
So that it is archived and accessible

Acceptance Criteria

GIVEN a PV PDF is generated
THEN it is stored in a SharePoint document library
AND a reference/link is persisted and linked to the allocation transaction


‚∏ª

US8 ‚Äî Attach the PV link to the ServiceNow artifact (Request or Incident)

As a support agent
I want the PV link to be available in ServiceNow
So that I can access the proof from the ticket

Acceptance Criteria

WHEN a PV is available
THEN the PV link is added to:
- the updated ServiceNow Request (Catalog flow), OR
- the created ServiceNow Incident (non-catalog flow)


‚∏ª

US9 ‚Äî Notify stakeholders after allocation completion

As a system
I want to notify stakeholders after allocation completion
So that delivery is confirmed and proof is shared

Acceptance Criteria

WHEN an allocation is completed
THEN the beneficiary receives a notification with the PV link

IF configured
THEN the beneficiary‚Äôs manager is also notified


‚∏ª

US10 ‚Äî Explicitly track allocations completed without signature

As a system
I want to record allocations completed without signature
So that exceptions are auditable

Acceptance Criteria

GIVEN an allocation is completed without signature
THEN the bypass reason is recorded
AND visible in:
- PV
- ServiceNow Request/Incident


‚∏ª

‚úÖ Ce que cette version respecte exactement
	‚Ä¢	D√©cision Catalogue vs non catalogue faite au d√©but
	‚Ä¢	Catalogue ‚Üí Request existante obligatoire ‚Üí on compl√®te (pas de cr√©ation)
	‚Ä¢	Non catalogue ‚Üí saisie libre ‚Üí Incident
	‚Ä¢	PV + SharePoint + notifications + sans signature

‚∏ª

Si tu veux, je te la repasse en fran√ßais (m√™me structure, m√™me num√©rotation).
